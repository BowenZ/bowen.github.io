<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
/*#circle{
	width: 220px;
	height: 220px;
}*/
    </style>
</head>

<body>
    <canvas id="circle"></canvas>
</body>
<script>
function drawCircle_pedometer(canvasId, circleAngle, type) {
    var canvas = document.getElementById(canvasId);
    if (canvas.getContext) {
        var lineWidth = 16 * 2;
        var width = 220 * 2;
        var height = width;
        var shadowBlur = 5 * 2;
        var radius = (width) / 2 - shadowBlur - lineWidth;
        var x = width / 2;
        var y = height / 2;
        canvas.width = width;
        canvas.height = height;
        var ctx = canvas.getContext('2d');
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.lineWidth = lineWidth;
        var endAngle = 0 * Math.PI;
        if (circleAngle >= 100) {
            endAngle = 0.49 * Math.PI;
        } else if (circleAngle > 75) {
            endAngle = (0.5 - (100 - circleAngle) * 0.02) * Math.PI;
        } else {
            endAngle = (0.5 + circleAngle * 0.02) * Math.PI;
        }
        var startAngle = 0.5 * Math.PI;

        ctx.strokeStyle = "#fff";
        ctx.lineCap = "round";
        ctx.shadowColor = "#ccc";
        ctx.shadowBlur = shadowBlur + 1;
        ctx.shadowOffsetX = 0;
        ctx.shadowOffsetY = 0;
        ctx.beginPath();
        ctx.arc(x, y, radius, 0.5 * Math.PI, 0.49 * Math.PI, false);
        ctx.stroke();


        var linear = ctx.createLinearGradient(10, 10, 360, 360);
        linear.addColorStop(0, '#888');
        // linear.addColorStop(0.5, '#f44444');
        linear.addColorStop(1, '#000');

        ctx.strokeStyle = linear;
        ctx.beginPath();
        ctx.arc(x, y, radius, startAngle, endAngle, false);
        ctx.stroke();

        // ctx.beginPath();
		ctx.fillStyle = "#666666";
		ctx.font = "bold 40px Helvetica";
		ctx.textAlign = 'center';
		ctx.fillText("这个是文字",  width/2, height/2+10);

		ctx.fillStyle = linear;
		ctx.font = "normal 30px Helvetica";
		ctx.fillText('文字', width/2, 130);
		// ctx.closePath();
        ctx.restore();

    }
}
drawCircle_pedometer('circle', 45);
</script>

</html>
